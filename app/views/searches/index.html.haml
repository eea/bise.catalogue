

.row{ style: 'background: #f7f7f7; height: 45px; padding: 5px 0'}
  .col-lg-12
    .row
      .col-md-6
        %select.selectpicker{multiple: 'multiple', style: "width: 500px",
          "data-selected-text-format" => "count>3", "data-width" => "75%"}
          %optgroup{label: "Categories"}
            %option{ value: 'documents', selected: true} Documents
            %option{ value: 'links', selected: true} Links
            %option{ value: 'articles', selected: true} Webpages
            %option{ value: 'species', selected: true} Species
            %option{ value: 'habitats', selected: true} Habitat types
            %option{ value: 'protected_areas', selected: true} Sites

        -# .btn-group-vertical
        -#   %a.btn.btn-default.active All
        -#   %a.btn.btn-default Documents
        -#   %a.btn.btn-default Links
        -#   %a.btn.btn-default Webpages
        -#   %a.btn.btn-default Species
        -#   %a.btn.btn-default Habitat types
        -#   %a.btn.btn-default Sites

      .col-md-6
        = form_for(@search, url: searches_path, html: { class: 'form-inline pull-right'}) do |f|
          .input-group{ style: 'width: 300px' }
            = f.text_field :query, class: 'form-control'
            .input-group-btn
              %button.btn.btn-success{type: "submit"}
                = fa_icon 'search'
                Search


.row
  .col-sm-4.col-md-3.hidden-xs.catalogue-facets{ style: 'background: #f7f7f7; height: 100%'}

    - @rows.results.facets.except('site').each do |facet|
      - if !facet[1]['terms'].nil? && facet[1]['terms'].any?
        %h4
          %a{ href: '#', data: { toggle: 'collapse', target: "##{facet[0]}"}}
            = t("catalogue.facets.#{facet[0]}")
        %ul.nav.nav-sidebar.in{ id: facet[0] }
          - facet[1]['terms'].each do |t|
            %li
              - if !current_page?(params.merge(facet[0] => t['term'], page: 1))
                = link_to params.merge({ facet[0] => t['term'] , page: 1}) do
                  = t['term']
                  %span.label.label-primary.pull-right= t['count']
              - else
                = link_to params.except(facet[0]), class: 'active text-danger' do
                  = fa_icon 'times'
                  = "Remove #{t['term']}"

    -# - @rows.results.facets.except('site').each do |facet|
    -#   - if !facet[1]['terms'].nil? && facet[1]['terms'].any?
    -#     %h4
    -#       %a{ href: '#', data: { toggle: 'collapse', target: "##{facet[0]}"}}
    -#         = t("catalogue.facets.#{facet[0]}")
    -#     %ul.nav.nav-sidebar.in{ id: facet[0] }
    -#       - facet[1]['terms'].each do |t|
    -#         %li
    -#           = link_to params.merge({ facet[0] => t['term'] }) do
    -#             = t['term']
    -#             %span.badge.pull-right= t['count']
    %br


  .col-md-9.col-sm-8
    %h1.page-header Results
    - @rows.results.each_with_hit do |row, hit|
      - if row.class == Article
        = render "public_cells/article", article: row, hit: hit
      - elsif row.class == Document
        = render "public_cells/document", doc: row, hit: hit
      - elsif row.class == Link
        = render "public_cells/link", link: row, hit: hit
      - elsif row.class == Species
        = render "public_cells/species", species: row, hit: hit
      - elsif row.class == ProtectedArea
        = render "public_cells/protected_area", protected_area: row, hit: hit
      - elsif row.class == Habitat
        = render "public_cells/habitat", habitat: row, hit: hit
    %br
    /= page_entries_info @rows.results
    = will_paginate @rows.results, renderer: BootstrapPagination::Rails
    %br
    %br



-# .row
-#   .col-md-3.menu-wrapper
-#     - @rows.results.facets.except('site').each do |facet|
-#       - unless facet[1]['terms'].nil?
-#         .panel.panel-warning
-#           .panel-heading
-#             %a{"data-toggle" => "collapse", href: "#facet_#{facet[0]}"}
-#               = t("catalogue.facets.#{facet[0]}")
-#           .panel-body
-#             %h3= t("catalogue.facets.#{facet[0]}")
-#           %div.list-group{ id: "facet_#{facet[0]}", class: (false ? "collapse in" : "collapse") }
-#             - facet[1]['terms'].each do |t|
-#               = link_to t['term'], params.merge({ facet[0] => t['term'] }), class: 'list-group-item'


-#         %li.nav-header
-#           %a{"data-target" => "#userMenu", "data-toggle" => "collapse", href: "#"}
-#             User
-#             %i.icon-angle-down
-#           %ul#userMenu.collapse.in{style: "list-style: none;"}
-#             %li.active
-#               %a{href: "#"}
-#                 %i.icon-home>
-#                 Home
-#             %li
-#               %a{href: "#"}
-#                 %i.icon-envelope-alt>
-#                 Messages
-#                 %span.badge.badge-info 4
-#             %li
-#               %a{href: "#"}
-#                 %i.icon-cogs>
-#                 Settings
-#             %li
-#               %a{href: "#"}
-#                 %i.icon-comment>
-#                 Shoutbox
-#             %li
-#               %a{href: "#"}
-#                 %i.icon-user>
-#                 Staff List
-#             %li
-#               %a{href: "#"}
-#                 %i.icon-flag>
-#                 My Infractions
-#             %li
-#               %a{href: "#"}
-#                 %i.icon-exclamation-sign>
-#                 Rules &amp; Regulations
-#             %li
-#               %a{href: "#"}
-#                 %i.icon-off>
-#                 Logout
-#         %li.nav-header
-#           %a{"data-target" => "#radioDJMenu", "data-toggle" => "collapse", href: "#"}
-#             Radio DJ
-#             %i.icon-angle-right
-#           %ul#radioDJMenu.collapse{style: "list-style: none;"}
-#             %li
-#               %a{href: "#"} Information &amp; Stats
-#               %ul#userMenu.collapse.in{style: "list-style: none;"}
-#                 %li.active
-#                   %a{href: "#"}
-#                     %i.icon-home>
-#                     Home
-#                 %li
-#                   %a{href: "#"}
-#                     %i.icon-envelope-alt>
-#                     Messages
-#                     %span.badge.badge-info 4
-#                 %li
-#                   %a{href: "#"}
-#                     %i.icon-cogs>
-#                     Settings
-#                 %li
-#                   %a{href: "#"}
-#                     %i.icon-comment>
-#                     Shoutbox
-#                 %li
-#                   %a{href: "#"}
-#                     %i.icon-user>
-#                     Staff List
-#                 %li
-#                   %a{href: "#"}
-#                     %i.icon-flag>
-#                     My Infractions
-#                 %li
-#                   %a{href: "#"}
-#                     %i.icon-exclamation-sign>
-#                     Rules &amp; Regulations
-#                 %li
-#                   %a{href: "#"}
-#                     %i.icon-off>
-#                     Logout
-#             %li
-#               %a{href: "#"} DJ Says
-#             %li
-#               %a{href: "#"} Request Line
-#             %li
-#               %a{href: "#"} Timetable
-#             %li
-#               %a{href: "#"} Banned Songs
-#         %li.nav-header
-#           %a{"data-target" => "#headDJMenu", "data-toggle" => "collapse", href: "#"}
-#             Head DJ
-#             %i.icon-angle-right
-#           %ul#headDJMenu.collapse{style: "list-style: none;"}
-#             %li
-#               %a{href: "#"}
-#                 %i.icon->
-#                 All Banned Songs



-#   .col-md-9
-#     - @rows.results.each_with_hit do |row, hit|
-#       .cell
-#         - if row.class == Article
-#           = render "public_cells/article", article: row, hit: hit
-#         - elsif row.class == Document
-#           = render "public_cells/document", doc: row, hit: hit
-#         - elsif row.class == Link
-#           = render "public_cells/link", link: row, hit: hit
-#         - elsif row.class == Species
-#           = render "public_cells/species", species: row, hit: hit
-#         - elsif row.class == ProtectedArea
-#           = render "public_cells/protected_area", protected_area: row, hit: hit
-#         - elsif row.class == Habitat
-#           = render "public_cells/habitat", habitat: row, hit: hit

-#     %br
-#     /= page_entries_info @rows.results
-#     -# = will_paginate @rows.results
-#     = will_paginate @rows.results, renderer: BootstrapPagination::Rails




